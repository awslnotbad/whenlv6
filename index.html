<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Access-Control-Allow-Origin" content="*">
	<title>blibili-lv6计算器</title>
	<link rel="stylesheet" href="layui/css/layui.css" />
	<script type="text/javascript" src="layui/layui.js"></script>
	<style>
		.layui-card-body {
			min-height: 300px;
		}
	</style>
</head>
<body background="https:\/\/api.paugram.com\/wallpaper\/?source=gh"no-repeat;

style=" background-repeat:no-repeat ;
background-size:100% 100%;
background-size: cover;
background-repeat: no-repeat;
background-position: 50%;
background-attachment: fixed;">
	<div class="layui-fluid" id="LAY-component-grid-all" style="margin-top: 15px;">
		<div class="layui-row layui-col-space10">
			<div class="layui-col-xs12 layui-col-sm4 layui-col-md4">
				</div>
			</div>
			<div class="layui-col-xs12 layui-col-sm4 layui-col-md4">
				<div class="layui-card">
					<div class="layui-card-header">
						预期天数计算:
					</div>
					<div class="layui-card-body">
						<form class="layui-form" lay-filter="formBili">
							<div class="layui-form-item">
								<label class="layui-form-label">每日登录</label>
								<div class="layui-input-block">
									<input type="checkbox" lay-filter="checkbox1" name="like[login]" value="login"
										title="登录Ｂ站经验+5">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">每日观看</label>
								<div class="layui-input-block">
									<input type="checkbox" lay-filter="checkbox2" name="like[watch]" value="watch"
										title="观看视频经验+5">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">每日分享</label>
								<div class="layui-input-block">
									<input type="checkbox" lay-filter="checkbox3" name="like[share]" value="share"
										title="分享视频经验+5">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">风纪奖励</label>
								<div class="layui-input-block">
									<input type="checkbox" lay-filter="checkbox4" name="like[judgeMen]" value="judgeMen"
										title="月度S级硬币+30">
								</div>
							</div>
							<div class="layui-form-item">
								<label class="layui-form-label">每日投币</label>
								<div class="layui-input-inline">
									<select name="quiz1" lay-filter="select1">
										<option value="">每日投币</option>
										<option value="0" selected="">每天白嫖</option>
										<option value="1">每天一币</option>
										<option value="2">每天两币</option>
										<option value="3">每天三币</option>
										<option value="4">每天四币</option>
										<option value="5">每天五币</option>

									</select>
								</div>
							</div>
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">我的硬币</label>
									<div class="layui-input-inline">
										<input type="text" id="yingbi" autocomplete="off" class="layui-input" value="10"
											oninput="only_number(this,1);" />
									</div>
								</div>
							</div>
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">当前经验</label>
									<div class="layui-input-inline">
										<input type="number" id="thisJingYan" autocomplete="off" class="layui-input"
											value="0" oninput="only_number(this,2);" />
									</div>
								</div>
							</div>
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">六级经验</label>
									<div class="layui-input-inline">
										<input type="number" id="sixJingYan" autocomplete="off" class="layui-input"
											value="28800" oninput="only_number(this,3);" />
									</div>
								</div>
							</div>
							<div class="layui-form-item">
								<div class="layui-inline">
									<label class="layui-form-label">剩余天数</label>
									<div class="layui-input-block" align="center"
										style="min-width: 180px;min-height: 90px;">
										<div style="margin-top: 18px;">
											<span id="juLiTianShu" style="font-size: 40px;color: #fb7299;">114514</span>
											<br>
										</div>
									</div>
								</div>
							</div>
							<div>
								<p style="text-align:center">
									<img style="width:32px;height:32px;margin-bottom:-8px" src="https://moe.blog/content/uploadfile/Links/icp.gov.moe.png">
     								<a href="https://icp.gov.moe/?keyword=20217478"" target="_blank" data-pjax-state="">
  								  <span style="color:#ff0000">萌</span><span style="color:#ca7900">I</span><span style="color:#48ab18">C</span><span style="color:#2720ac">P</span><span style="color:#9b17ae">备</span> </a>
    							 <a href="https://icp.gov.moe/?keyword=20217478" target="_blank" data-pjax-state=""> <span style="color:#ff0000">20</span><span style="color:#ca7900">21</span><span style="color:#48ab18">74</span><span style="color:#2720ac">78</span><span style="color:#f40428">号</span></a>
								</p>
							</div>
						</form>
					</div>
				</div>
			</div>
	<script>
		
		var login = false;
		var watch = false;
		var share = false;
		var judgeMen = false;
		var touBiShuLiang = 0;
		var yongYouYingBi = 10;
		var thisJingYan = 0;
		var sixJingYan = 28800;
		layui.use('form', function () {
			var form = layui.form;
			var $ = layui.$;
			form.on('checkbox(checkbox1)', function (data) {
				console.log(data.elem.checked);

				login = data.elem.checked;
				jiSuan();
			});
			form.on('checkbox(checkbox2)', function (data) {
				console.log(data.elem.checked);

				watch = data.elem.checked;
				jiSuan();
			});
			form.on('checkbox(checkbox3)', function (data) {
				console.log(data.elem.checked);
				share = data.elem.checked;
				jiSuan();
			});
			form.on('checkbox(checkbox4)', function (data) {
				console.log(data.elem.checked);
				judgeMen = data.elem.checked;
				jiSuan();
			});
			form.on('select(select1)', function (data) {
				if (data.value == null || data.value == "") {
					touBiShuLiang = 0;
				} else {
					touBiShuLiang = data.value;
				}
				jiSuan();
			});
			//				$.ajax({
			//					//type: "get",
			//					url: "http://api.bilibili.com/x/web-interface/nav",
			//					async: true,
			//					dataType: 'JSONP',
			//					success: function(data) {
			//						var da = data.data;
			//						if(da.isLogin == false) {
			//							//您的B站未登录无法动态加载数据,请手动输入参数!
			//							layer.alert('您的B站未登录无法动态加载数据,请手动输入参数!');
			//						} else {
			//							document.getElementById("touXiang").src = da.face;
			//
			//						}
			//					}
			//				});
		});
		//输入框，限金额
		function only_number(obj, type) {
			//先把非数字的都替换掉，除了数字和.
			obj.value = obj.value.replace(/[^\d.]/g, "");
			//必须保证第一个为数字而不是.
			obj.value = obj.value.replace(/^\./g, "");
			//保证只有出现一个.而没有多个.
			obj.value = obj.value.replace(/\.{2,}/g, ".");
			//保证.只出现一次，而不能出现两次以上
			obj.value = obj.value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");
			if (type == 1) {
				yongYouYingBi = obj.value;
			} else if (type == 2) {
				thisJingYan = obj.value;
			} else if (type == 3) {
				sixJingYan = obj.value;
			}
			jiSuan();
		}

		function jiSuan() {
			var num = 0;
			if (login == true || login == "true") {
				num = num + 5;
			}
			if (watch == true || watch == "true") {
				num = num + 5;
			}
			if (share == true || share == "true") {
				num = num + 5;
			}
			console.log("每日基础=" + num);
			var touBi = (touBiShuLiang * 10);
			console.log("每日投币=" + touBi);
			var bi = yongYouYingBi;
			console.log("拥有硬币=" + touBi);
			var xuYaoJingYan;
			if (sixJingYan > thisJingYan) {

				xuYaoJingYan = sixJingYan - thisJingYan;
				//console.log("需要经验值=" + xuYaoJingYan);
			} else {
				document.getElementById("juLiTianShu").innerText = 0;
			}
			var tian = 0;
			for (var i = 0; 0 < xuYaoJingYan; i++) {
				//判断是否使用风纪委员的逻辑
				if (judgeMen) {
					if (i % 30 === 0) {
						bi += 30;
					}
				}
				xuYaoJingYan = xuYaoJingYan - num;
				if (bi > touBiShuLiang) {
					//减去每日的投币经验
					xuYaoJingYan = xuYaoJingYan - touBi;
					//减去每日的投币经验
					bi = bi - touBiShuLiang;
				}
				bi++;
				tian = i;
				if (tian > 10000) {
					document.getElementById("juLiTianShu").innerText = tian;
					return;
				}
				//					console.log("需要经验值=" + xuYaoJingYan + "当前天数=" + tian);
			}

			document.getElementById("juLiTianShu").innerText = tian;
		}
		
	</script>

</body>
</html>
